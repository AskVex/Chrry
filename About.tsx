"use client"

import React, { useEffect } from "react"
import Skeleton from "./Skeleton"
import { useAppContext } from "./context/AppContext"
import { BrowserInstance, checkIsExtension } from "./utils"
import {
  BadgeCheck,
  CircleArrowLeft,
  Coins,
  Shell,
  UserRoundPlus,
} from "./icons"
import styles from "./About.module.scss"
import { RiNextjsFill } from "react-icons/ri"
import { BiLogoPostgresql } from "react-icons/bi"

import { SiCssmodules, SiJest, SiDrizzle, SiTypescript } from "react-icons/si"
import { FaChrome, FaFirefox } from "react-icons/fa"
import clsx from "clsx"
import Logo from "./Logo"
import Img from "./Img"
import { getFeatures } from "./utils/subscription"
import {
  useAuth,
  useData,
  useError,
  useNavigationContext,
} from "./context/providers"
import { useNavigation, usePlatform, useTheme } from "./platform"
export default function About() {
  const {
    // track,
    // isStandalone,
    // addHapticFeedback,

    // captureException,
    user,
    track,
  } = useAuth()

  const { t } = useAppContext()

  const { addHapticFeedback } = useTheme()
  const {
    // isDrawerOpen,
    // router,
    // t,
    // track,
    isStandalone,
    // addHapticFeedback,

    // captureException,
    // user,
  } = usePlatform()

  const { router, isDrawerOpen } = useNavigationContext()

  const { captureException } = useError()

  // useData()

  useEffect(() => {
    track({
      name: "about",
    })
  }, [])

  const {
    ADDITIONAL_CREDITS,
    CREDITS_PRICE,
    FRONTEND_URL,
    PLUS_PRICE,
    PRO_PRICE,
  } = useData()

  const { plusFeatures, memberFeatures, proFeatures, creditsFeatures } =
    getFeatures({
      t,
      ADDITIONAL_CREDITS,
      CREDITS_PRICE,
    })

  return (
    <Skeleton>
      <div
        className={clsx(styles.about)}
        style={{
          maxWidth: 800,
          margin: isDrawerOpen ? undefined : "0 auto",
          padding: "0 0px 20px 0px",
        }}
      >
        <h1 style={{ marginTop: 0 }}>
          <button className="link" onClick={() => router.push("/")}>
            <CircleArrowLeft color="var(--accent-1)" size={24} />
          </button>{" "}
          <span
            onClick={() => {
              if (user?.role === "admin") {
                captureException(new Error("About Vex"))
              }
            }}
          >
            {t("About Vex")}
          </span>
        </h1>
        <section style={{ marginBottom: 15 }}>
          <p>
            <a
              onClick={(e) => {
                addHapticFeedback()
                if (e.metaKey || e.ctrlKey) {
                  return
                }
                e.preventDefault()
                router.push("/why")
              }}
              href={isStandalone ? undefined : `${FRONTEND_URL}/why`}
            >
              {t("why_vex")}
            </a>
            {", "}
            <a
              onClick={(e) => {
                addHapticFeedback()
                if (e.metaKey || e.ctrlKey) {
                  return
                }
                e.preventDefault()

                if (checkIsExtension()) {
                  BrowserInstance?.runtime?.sendMessage({
                    action: "openInSameTab",
                    url: `${FRONTEND_URL}/blog`,
                  })

                  return
                }

                router.push("/blog")
              }}
              href={isStandalone ? undefined : `${FRONTEND_URL}/blog`}
            >
              {t("Blog")}
            </a>
            {", "}
            <a
              onClick={(e) => {
                addHapticFeedback()
                if (e.metaKey || e.ctrlKey) {
                  return
                }
                e.preventDefault()
                router.push("/terms")
              }}
              href={isStandalone ? undefined : `${FRONTEND_URL}/terms`}
            >
              {t("Terms of Use")}
            </a>
            {", "}
            <a
              onClick={(e) => {
                addHapticFeedback()
                if (e.metaKey || e.ctrlKey) {
                  return
                }
                e.preventDefault()
                router.push("/privacy")
              }}
              href={isStandalone ? undefined : `${FRONTEND_URL}/privacy`}
            >
              {t("Privacy Policy")}
            </a>
            {", "}
            <a href="https://x.com/askvexai">@askvexAI</a>
            {", "}
            <a href="mailto:contact@askvex.com">contact@askvex.com</a>
          </p>
        </section>

        <section>
          <p>ðŸ¥° {t("about.intro")}</p>
          <p style={{ marginTop: "1rem" }}>{t("about.intro2")}</p>
        </section>

        <section>
          <h2>
            <Img
              showLoading={false}
              src={`${FRONTEND_URL}/icons/lifeOS-128.png`}
              alt="LifeOS"
              width={22}
              height={22}
            />
            {t("lifeos.title")}
          </h2>
          <p>{t("lifeos.intro")}</p>
          <div className={styles.apps}>
            <div className={styles.app}>
              <h4>
                <Img
                  src={`${FRONTEND_URL}/images/apps/peach.png`}
                  alt=""
                  width={30}
                  height={30}
                />
                {t("Peach - AI Social Network")}
              </h4>
              <p className={styles.appDescription}>
                {t(
                  "Connect through intelligent personality matching and shared experiences.",
                )}
              </p>
            </div>
            <div className={styles.app}>
              <h4>
                <Img
                  src={`${FRONTEND_URL}/images/apps/atlas.png`}
                  alt=""
                  width={30}
                  height={30}
                />
                {t("Atlas - AI Travel Companion")}
              </h4>
              <p className={styles.appDescription}>
                {t(
                  "Your intelligent travel companion with personalized recommendations.",
                )}
              </p>
            </div>
            <div className={styles.app}>
              <h4>
                <Img
                  src={`${FRONTEND_URL}/images/apps/bloom.png`}
                  alt=""
                  width={30}
                  height={30}
                />
                {t("Bloom - Health & Planet")}
              </h4>
              <p className={styles.appDescription}>
                {t(
                  "Track personal wellness while monitoring environmental impact.",
                )}
              </p>
            </div>
            <div className={styles.app}>
              <h4>
                <Img
                  src={`${FRONTEND_URL}/images/apps/vault.png`}
                  alt=""
                  width={30}
                  height={30}
                />
                {t("lifeos.vault.title")}
              </h4>
              <p className={styles.appDescription}>
                {t("lifeos.vault.description")}
              </p>
            </div>
          </div>
          <p>
            <a
              onClick={(e) => {
                addHapticFeedback()
                if (e.metaKey || e.ctrlKey) {
                  return
                }
                e.preventDefault()
                router.push("/lifeOS")
              }}
              href={isStandalone ? undefined : `${FRONTEND_URL}/lifeOS`}
              className="button inverted"
            >
              {t("Explore LifeOS")}
            </a>
          </p>
        </section>

        <section>
          <h2>{t("about.approach.title")}</h2>
          <p>{t("about.approach.content")}</p>
        </section>

        <section>
          <h2>{t("about.transparency.title")}</h2>
          <p>{t("about.transparency.intro")}</p>
          <ul>
            <li>{t("about.transparency.items.pricing")}</li>
            <li>{t("about.transparency.items.usage")}</li>
            <li>{t("about.transparency.items.communication")}</li>
            <li>{t("about.transparency.items.data")}</li>
          </ul>
        </section>

        <h2 style={{ fontSize: 28 }}>{t("All Plans")}</h2>
        <section>
          <h2>
            <Logo size={24} /> {t("Vex")} {t("Free")}
            {!user && (
              <button
                className="inverted"
                style={{ marginLeft: "auto", fontSize: 14 }}
                onClick={() => {
                  if (checkIsExtension()) {
                    BrowserInstance?.runtime?.sendMessage({
                      action: "openInSameTab",
                      url: `${FRONTEND_URL}/about?signIn=register`,
                    })

                    return
                  }
                  router.push("/about?signIn=register")
                }}
              >
                <UserRoundPlus size={16} /> {t("Register")}
              </button>
            )}
          </h2>
          {memberFeatures.map((feature) => (
            <span key={feature.text}>
              {" "}
              {feature.emoji} {feature.text}
            </span>
          ))}
        </section>

        <section>
          <h2>
            <Coins size={24} /> {t("Vex")} {t("Credits")}
            <button
              onClick={() => {
                if (checkIsExtension()) {
                  BrowserInstance?.runtime?.sendMessage({
                    action: "openInSameTab",
                    url: `${FRONTEND_URL}/about?subscribe=true&plan=credits`,
                  })

                  return
                }
                router.push("/about?subscribe=true&plan=credits")
              }}
              className="inverted"
              style={{ marginLeft: "auto", fontSize: 14 }}
            >
              {t("credits_pricing", {
                credits: ADDITIONAL_CREDITS,
                price: `${CREDITS_PRICE}.00`,
              })}
            </button>
          </h2>
          {creditsFeatures.map((feature) => (
            <span key={feature.text}>
              {" "}
              {feature.emoji} {feature.text}
            </span>
          ))}
        </section>

        <section>
          <h2>
            <Logo size={24} isMagenta /> {t("Vex")} {t("Plus")}
            <span
              title={t("Most popular")}
              style={{
                color: "var(--accent-1)",
                marginTop: "4px",
                marginLeft: "4px",
                verticalAlign: "middle",
              }}
            >
              <BadgeCheck size={20} />
            </span>
            <button
              onClick={() => {
                if (checkIsExtension()) {
                  BrowserInstance?.runtime?.sendMessage({
                    action: "openInSameTab",
                    url: `${FRONTEND_URL}/about?subscribe=true&plan=plus`,
                  })

                  return
                }
                router.push("/about?subscribe=true&plan=plus")
              }}
              className="inverted"
              style={{ marginLeft: "auto", fontSize: 14 }}
            >
              â‚¬
              {t("{{price}}/month", {
                price: PLUS_PRICE,
              })}
            </button>
          </h2>
          {plusFeatures.map((feature) => (
            <span key={feature.text}>
              {" "}
              {feature.emoji} {feature.text}
            </span>
          ))}
        </section>

        <section>
          <h2>
            <Logo size={24} isVivid /> {t("Vex")} {t("Pro")}
            <button
              onClick={() => {
                if (checkIsExtension()) {
                  BrowserInstance?.runtime?.sendMessage({
                    action: "openInSameTab",
                    url: `${FRONTEND_URL}/about?subscribe=true&plan=pro`,
                  })

                  return
                }
                router.push("/about?subscribe=true&plan=pro")
              }}
              className="inverted"
              style={{ marginLeft: "auto", fontSize: 14 }}
            >
              â‚¬
              {t("{{price}}/month", {
                price: PRO_PRICE,
              })}
            </button>
          </h2>
          {proFeatures.map((feature) => (
            <span key={feature.text}>
              {" "}
              {feature.emoji} {feature.text}
            </span>
          ))}
        </section>

        <section>
          <h2>{t("about.platforms.title")}</h2>
          <p>{t("about.platforms.content")}</p>

          <div>
            <div>
              <h3>{t("about.platforms.web.title")}</h3>
              <p>{t("about.platforms.web.content")}</p>
              <video
                className={styles.video}
                controls
                src={`https://7079yofdv0.ufs.sh/f/5ALK9G4mxClOL8j2AfbZ5dgLDCVo4JzBsXqI3MrF8KatARwv`}
              />
            </div>

            <div>
              <h3>{t("about.platforms.pwa.title")}</h3>
              <p>{t("about.platforms.pwa.content")}</p>

              <video
                className={styles.video}
                controls
                src={`https://7079yofdv0.ufs.sh/f/5ALK9G4mxClOTAEfNuXpQy4HJYn8fWo1mFVRaG7eqCiD3A5l`}
              />
            </div>

            <div>
              <h3 style={{ display: "flex" }}>
                {t("about.platforms.chrome.title")}{" "}
                <a
                  target="_blank"
                  style={{ marginLeft: "auto" }}
                  href="https://chromewebstore.google.com/detail/vex/odgdgbbddopmblglebfngmaebmnhegfc"
                  className={clsx("button small", styles.installButton)}
                >
                  <FaChrome size={18} />
                  {t("Install")}
                </a>
              </h3>
              <p>{t("about.platforms.chrome.content")} </p>
              <video
                className={styles.video}
                controls
                src={`https://7079yofdv0.ufs.sh/f/5ALK9G4mxClOWTxc2Y6sD5zVU8hPgdAmWQy4qXa0KuL2HE7e`}
              />
            </div>

            <div>
              <h3 style={{ display: "flex" }}>
                {t("about.platforms.firefox.title")}
                <a
                  style={{ marginLeft: "auto" }}
                  target="_blank"
                  href="https://addons.mozilla.org/en-US/firefox/addon/vex"
                  className={clsx("button small", styles.installButton)}
                >
                  <FaFirefox size={18} />
                  {t("Install")}
                </a>
              </h3>
              <p>{t("about.platforms.firefox.content")}</p>
              <video
                className={styles.video}
                controls
                src={`https://7079yofdv0.ufs.sh/f/5ALK9G4mxClOPpTJtj5mvZ0Y8iWC57kp1lcG4ExKLJo3NHbf`}
              />
            </div>
          </div>
        </section>

        {/* <section>
          <h2>{t("about.team.title")}</h2>
          <p>{t("about.team.content")}</p>
        </section> */}

        <div className={styles.ossWrapper}>
          <h2 className={styles.ossTitle}>{t("Open Source")}</h2>
          <div
            style={{ marginBottom: "1.5rem" }}
            className={styles.ossContainer}
          >
            <div className={styles.oss}>
              <SiTypescript style={{ width: 40, height: 40 }} />
              <a
                href="https://www.typescriptlang.org"
                target="_blank"
                rel="nofollow"
                className={styles.ossLink}
              >
                TypeScript
              </a>
            </div>
            <div className={styles.oss}>
              <RiNextjsFill style={{ width: 40, height: 40 }} />
              <a
                href="https://nextjs.org"
                target="_blank"
                rel="nofollow"
                className={styles.ossLink}
              >
                Next.js
              </a>
            </div>
            <div className={styles.oss}>
              <BiLogoPostgresql style={{ width: 40, height: 40 }} />
              <a
                href="https://www.postgresql.org"
                target="_blank"
                rel="nofollow"
                className={styles.ossLink}
              >
                PostgreSQL
              </a>
            </div>
          </div>

          <div className={styles.ossContainer}>
            <div className={styles.oss}>
              <SiJest style={{ width: 40, height: 40 }} />
              <a
                href="https://jestjs.io"
                target="_blank"
                rel="nofollow"
                className={styles.ossLink}
              >
                Jest
              </a>
            </div>
            <div className={styles.oss}>
              <SiCssmodules style={{ width: 40, height: 40 }} />
              <a
                href="https://github.com/css-modules/css-modules"
                target="_blank"
                rel="nofollow"
                className={styles.ossLink}
              >
                CSS Modules
              </a>
            </div>
            <div className={styles.oss}>
              <Shell style={{ width: 40, height: 40 }} />
              <a
                href="https://lucide.dev"
                target="_blank"
                rel="nofollow"
                className={styles.ossLink}
              >
                Lucide
              </a>
            </div>
          </div>
        </div>

        <div className={styles.lastUpdated}>
          <Img src={`${FRONTEND_URL}/hamster.png`} width={24} height={24} />
          {t("about.last_updated", { date: "September 29, 2025" })}
        </div>
      </div>
    </Skeleton>
  )
}
